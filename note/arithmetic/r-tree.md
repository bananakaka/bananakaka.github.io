R-tree
是什么？
R树是用来做空间数据存储的树状数据结构。例如给地理位置，矩形和多边形这类多维数据建立索引。R树的“R”代表“Rectangle（矩形）”。
用来做什么？
用来存储地图上的空间信息，例如餐馆地址，或者地图上用来构造街道，建筑，湖泊边缘的多边形。解决了高维空间搜索问题，例如“查找距离我2千米以内的博物馆”，“检索距离我2千米以内的所有路段”。
怎么实现的？
R树的核心思想是聚合距离相近的节点并在树结构的上一层将其表示为这些节点的最小边界矩形，这个最小边界矩形就成为上一层的一个节点。
跟B树类似，R树也是平衡树（所以所有叶子节点都在同一深度）。采用了B树分割空间的思想，并在添加、删除操作时采用合并、分解结点的方法，保证树的平衡性。因此，R树就是一棵用来存储高维数据的平衡树。
R树的搜索算法：核心思想是画出查询语句相应的边框，并用它来决定要不要搜索某个子树。这样在搜索时可以跳过树上的大部分节点。跟B树类似，这个特性让R树可以把整棵树放在磁盘里，在需要的时候再把节点读进内存页，从而可以应用在大数据集和数据库上。

数据结构
按（内存）页存储，每一页存储多条数据，数据条数不超过一个事先定义的最大值，一般会多于最小值。非叶子节点上的每一条数据由指向子节点的标识符和该子节点的边界矩形组成。叶子节点则存储每个对象需要的数据，一般是一个边界矩形和指向数据的标识符。如果是点数据，叶子节点只需要存储这些点本身。如果是多边形数据（一般数据量很大的多边形需要额外存储），一般的做法是在叶子节点中存储多边形的最小边界矩形和指向这个多边形的数据的唯一标识符。

搜索
对于搜索路径上的每个节点，遍历其中的边界矩形，如果与搜索框相交就深入对应的子节点继续搜索。这样递归地搜索下去，直到所有相交的矩形都被访问过为止。如果搜索到一个叶子节点，则尝试比较搜索框与它的边界矩形和数据（如果有的话），如果该叶子节点在搜索框中，则把它加入搜索结果。